.b-page-category
  .b-page-category-header-wrapper
    h1.b-page-category-header-text =@category.header
    .b-page-category-top-filter
      a.b-page-category-top-filter-item href=url_for_sort_by_price_asc class="#{'m-current' if @current_params[:order] == :from_lowest_price}" ="Сначала дешевле"
      a.b-page-category-top-filter-item href=url_for_sort_by_price_desc class="#{'m-current' if @current_params[:order] == :from_highest_price}" ="Сначала дороже"
  .b-page-category-content
    .b-page-category-content-subcategories-wrapper
      - if @show_gender_filter == true
        = link_to_if @current_gender_filter != :all, 'Все', get_gender_url(:all)[:url], class: 'b-page-category-content-subcategories-item' do
          .b-page-category-content-subcategories-item.m-current ="Все"

        = link_to_if @current_gender_filter != :male, 'Мужские', get_gender_url(:male)[:url], class: 'b-page-category-content-subcategories-item' do
          .b-page-category-content-subcategories-item.m-current ="Мужские"

        = link_to_if @current_gender_filter != :female, 'Женские', get_gender_url(:female)[:url], class: 'b-page-category-content-subcategories-item' do
          .b-page-category-content-subcategories-item.m-current ="Женские"

        = link_to_if @current_gender_filter != :unisex, 'Унисекс', get_gender_url(:unisex)[:url], class: 'b-page-category-content-subcategories-item' do
          .b-page-category-content-subcategories-item.m-current ="Унисекс"

      .b-page-category-content-pagination-top
        - if @pages_total > 1
          .text ="Страница "
          .button-dropdown
            .button-dropdown-text =@page_current
            .button-dropdown-popup
              .button-dropdown-popup-links-wrapper
                - (1..@pages_total).each do |page_n|
                  - if page_n != @page_current
                    a.button-dropdown-popup-link href=get_url({page: page_n}) =page_n

        - if @items_total > limit_single
          /script
            | alert("#{@items_total}")
          .text ="По "
          a.button class="#{'m-selected' if @items_limit == limit_single || params[:limit].nil?}" href=url_for_limit_single =limit_single

          - if @items_total > limit_double
            a.button class="#{'m-selected' if @items_limit == limit_double}" href=url_for_limit_double =limit_double

          - if @items_total > limit_single
            a.button class="#{'m-selected' if @items_limit == :all}" href=url_for_limit_all ="Всё"

    - @items.each do |item|
      = render partial: 'catalogue/item_card', locals: {item: item}

    - if @pages_total > 1
      .b-page-category-content-pagination-bottom
        - prev_page = get_prev_page
        - next_page = get_next_page

        - if prev_page
          a.link.page-prev href=prev_page[:url] ="<"
          a.link.page-before href=prev_page[:url] =prev_page[:page]

        .link.page-current =@page_current

        - if next_page
          a.link.page-after href=next_page[:url] =next_page[:page]
          a.link.page-next href=next_page[:url] =">"
